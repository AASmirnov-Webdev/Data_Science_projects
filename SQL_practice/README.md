# Работа с базами данных. SQL практика.
## Описание проекта
В данном проекте необходимо проанализировать данные о фондах и инвестициях и написать запросы к базе данных, которые постепенно будут усложняться.

## Схема базы данных

![Схема базы данных](img/basic_sql_project_ERD.png)

## Описание данных

### `acquisition`

Содержит информацию о покупках одних компаний другими.

- первичный ключ `id` — идентификатор или уникальный номер покупки;
- внешний ключ `acquiring_company_id` — ссылается на таблицу `company` — идентификатор компании-покупателя, то есть той, что покупает другую компанию;
- внешний ключ `acquired_company_id` — ссылается на таблицу `company` — идентификатор компании, которую покупают;
- `term_code` — способ оплаты сделки:
- `cash` — наличными;
- `stock` — акциями компании;
- `cash_and_stock` — смешанный тип оплаты: наличные и акции.
- `price_amount` — сумма покупки в долларах;
- `acquired_at` — дата совершения сделки;
- `created_at` — дата и время создания записи в таблице;
- `updated_at` — дата и время обновления записи в таблице.

### `company`
 
Содержит информацию о компаниях-стартапах.

- первичный ключ `id` — идентификатор, или уникальный номер компании;
- `name` — название компании;
- `category_code` — категория деятельности компании, например:
- `news` — специализируется на работе с новостями;
- `social` — специализируется на социальной работе.
- `status` — статус компании:
- `acquired` — приобретена;
- `operating` — действует;
- `ipo` — вышла на IPO;
- `closed` — перестала существовать.
- `founded_at` — дата основания компании;
- `closed_at` — дата закрытия компании, которую указывают в том случае, если компании больше не существует;
- `domain` — домен сайта компании;
- `network_username` — профиль фонда в корпоративной сети биржи;
- `country_code` — код страны, например, USA для США, GBR для Великобритании;
- `investment_rounds` — число раундов, в которых компания участвовала как инвестор;
- `funding_rounds` — число раундов, в которых компания привлекала инвестиции;
- `funding_total` — сумма привлечённых инвестиций в долларах;
- `milestones` — количество важных этапов в истории компании;
- `created_at` — дата и время создания записи в таблице;
- `updated_at` — дата и время обновления записи в таблице.

### `education`

Хранит информацию об уровне образования сотрудников компаний.

- первичный ключ `id` — уникальный номер записи с информацией об образовании;
- внешний ключ `person_id` — ссылается на таблицу `people` — идентификатор человека, информация о котором представлена в записи;
- `degree_type` — учебная степень, например:
- `BA` — Bachelor of Arts — бакалавр гуманитарных наук;
- `MS` — Master of Science — магистр естественных наук.
- `instituition` — учебное заведение, название университета;
- `graduated_at` — дата завершения обучения, выпуска;
- `created_at` — дата и время создания записи в таблице;
- `updated_at` — дата и время обновления записи в таблице.

### fund

Хранит информацию о венчурных фондах.

- первичный ключ `id` — уникальный номер венчурного фонда;
- `name` — название венчурного фонда;
- `founded_at` — дата основания фонда;
- `domain` — домен сайта фонда;
- `network_username` — профиль фонда в корпоративной сети биржи;
- `country_code` — код страны фонда;
- `investment_rounds` — число инвестиционных раундов, в которых фонд принимал участие;
- `invested_companies` — число компаний, в которые инвестировал фонд;
- `milestones` — количество важных этапов в истории фонда;
- `created_at` — дата и время создания записи в таблице;
- `updated_at` — дата и время обновления записи в таблице.

### funding_round

Содержит информацию о раундах инвестиций.

- первичный ключ `id` — уникальный номер инвестиционного раунда;
- внешний ключ `company_id` — ссылается на таблицу `company` — уникальный номер компании, участвовавшей в инвестиционном раунде;
- `funded_at` — дата проведения раунда;
- `funding_round_type` — тип инвестиционного раунда, например:
- `venture` — венчурный раунд;
- `angel` — ангельский раунд;
- `series_a` — раунд А.
- `raised_amount` — сумма инвестиций, которую привлекла компания в этом раунде в долларах;
- `pre_money_valuation` — предварительная, проведённая до инвестиций оценка стоимости компании в долларах;
- `participants` — количество участников инвестиционного раунда;
- `is_first_round` — является ли этот раунд первым для компании;
- `is_last_round`— является ли этот раунд последним для компании;
- `created_at` — дата и время создания записи в таблице;
- `updated_at` — дата и время обновления записи в таблице.

### investment

Содержит информацию об инвестициях венчурных фондов в компании-стартапы.

- первичный ключ `id` — уникальный номер инвестиции;
- внешний ключ `funding_round_id` — ссылается на таблицу `funding_round` — уникальный номер раунда инвестиции;
- внешний ключ `company_id` — ссылается на таблицу `company` — уникальный номер компании-стартапа, в которую инвестируют;
- внешний ключ `fund_id` — ссылается на таблицу `fund` — уникальный номер фонда, инвестирующего в компанию-стартап;
- `created_at` — дата и время создания записи в таблице;
- `updated_at` — дата и время обновления записи в таблице.

### people

Содержит информацию о сотрудниках компаний-стартапов.

- первичный ключ `id` — уникальный номер сотрудника;
- `first_name` — имя сотрудника;
- `last_name` — фамилия сотрудника;
- внешний ключ `company_id` — ссылается на таблицу `company` — уникальный номер компании-стартапа;
- `network_username` — профиль фонда в корпоративной сети биржи;
- `created_at` — дата и время создания записи в таблице;
- `updated_at` — дата и время обновления записи в таблице.

# Таблица для навигации по задачам

| № | Название запроса  | Описание задачи |
| :---: | :---: | --- |
| 1 | **[SQL-запрос №1](requests/request_1.sql)** | Посчитайте, сколько компаний закрылось. |
| 2 | **[SQL-запрос №2](requests/request_2.sql)** | Отобразите количество привлечённых средств для новостных компаний США. Используйте данные из таблицы `company`. Отсортируйте таблицу по убыванию значений в поле `funding_total`. |
| 3 | **[SQL-запрос №3](requests/request_3.sql)** | Найдите общую сумму сделок по покупке одних компаний другими в долларах. Отберите сделки, которые осуществлялись только за наличные с 2011 по 2013 год включительно. |
| 4 | **[SQL-запрос №4](requests/request_4.sql)** | Отобразите имя, фамилию и названия аккаунтов людей в поле network_username, у которых названия аккаунтов начинаются на `Silver`. |
| 5 | **[SQL-запрос №5](requests/request_5.sql)** | Выведите на экран всю информацию о людях, у которых названия аккаунтов в поле `network_username` содержат подстроку `money`, а фамилия начинается на `K`. |
| 6 | **[SQL-запрос №6](requests/request_6.sql)** | Для каждой страны отобразите общую сумму привлечённых инвестиций, которые получили компании, зарегистрированные в этой стране. Страну, в которой зарегистрирована компания, можно определить по коду страны. Отсортируйте данные по убыванию суммы. |
| 7 | **[SQL-запрос №7](requests/request_7.sql)** | Составьте таблицу, в которую войдёт дата проведения раунда, а также минимальное и максимальное значения суммы инвестиций, привлечённых в эту дату. Оставьте в итоговой таблице только те записи, в которых минимальное значение суммы инвестиций не равно нулю и не равно максимальному значению. |
| 8 | **[SQL-запрос №8](requests/request_8.sql)** | Создайте поле с категориями: 1. Для фондов, которые инвестируют в 100 и более компаний, назначьте категорию `high_activity`. 2. Для фондов, которые инвестируют в 20 и более компаний до 100, назначьте категорию `middle_activity`. 3. Если количество инвестируемых компаний фонда не достигает 20, назначьте категорию `low_activity`. 4. Отобразите все поля таблицы `fund` и новое поле с категориями. |
| 9 | **[SQL-запрос №9](requests/request_9.sql)** | Для каждой из категорий, назначенных в предыдущем задании, посчитайте округлённое до ближайшего целого числа среднее количество инвестиционных раундов, в которых фонд принимал участие. Выведите на экран категории и среднее число инвестиционных раундов. Отсортируйте таблицу по возрастанию среднего. |
| 10 | **[SQL-запрос №10](requests/request_10.sql)** | Проанализируйте, в каких странах находятся фонды, которые чаще всего инвестируют в стартапы. Для каждой страны посчитайте минимальное, максимальное и среднее число компаний, в которые инвестировали фонды этой страны, основанные с 2010 по 2012 год включительно. Исключите страны с фондами, у которых минимальное число компаний, получивших инвестиции, равно нулю. Выгрузите десять самых активных стран-инвесторов: отсортируйте таблицу по среднему количеству компаний от большего к меньшему. Затем добавьте сортировку по коду страны в лексикографическом порядке. |
| 11 | **[SQL-запрос №11](requests/request_11.sql)** | Отобразите имя и фамилию всех сотрудников стартапов. Добавьте поле с названием учебного заведения, которое окончил сотрудник, если эта информация известна. |
| 12 | **[SQL-запрос №12](requests/request_12.sql)** | Для каждой компании найдите количество учебных заведений, которые окончили её сотрудники. Выведите название компании и число уникальных названий учебных заведений. Составьте топ-5 компаний по количеству университетов. |
| 13 | **[SQL-запрос №13](requests/request_13.sql)** | Составьте список с уникальными названиями закрытых компаний, для которых первый раунд финансирования оказался последним. |
| 14 | **[SQL-запрос №14](requests/request_14.sql)** | Составьте список уникальных номеров сотрудников, которые работают в компаниях, отобранных в предыдущем задании. |
| 15 | **[SQL-запрос №15](requests/request_15.sql)** | Составьте таблицу, куда войдут уникальные пары с номерами сотрудников из предыдущей задачи и учебным заведением, которое окончил сотрудник. |
| 16 | **[SQL-запрос №16](requests/request_16.sql)** | Посчитайте количество учебных заведений для каждого сотрудника из предыдущего задания. При подсчёте учитывайте, что некоторые сотрудники могли окончить одно и то же заведение дважды. |
| 17 | **[SQL-запрос №17](requests/request_17.sql)** | Дополните предыдущий запрос и выведите среднее число учебных заведений (всех, не только уникальных), которые окончили сотрудники разных компаний. Нужно вывести только одну запись, группировка здесь не понадобится. |
| 18 | **[SQL-запрос №18](requests/request_18.sql)** | Напишите похожий запрос: выведите среднее число учебных заведений (всех, не только уникальных), которые окончили сотрудники Facebook (сервис, запрещённый на территории РФ). |
| 19 | **[SQL-запрос №19](requests/request_19.sql)** | Составьте таблицу из полей: 1. `name_of_fund` — название фонда; 2. `name_of_company` — название компании; 3. `amount` — сумма инвестиций, которую привлекла компания в раунде. 4. В таблицу войдут данные о компаниях, в истории которых было больше шести важных этапов, а раунды финансирования проходили с 2012 по 2013 год включительно. |
| 20 | **[SQL-запрос №20](requests/request_20.sql)** | Выгрузите таблицу, в которой будут такие поля: 1. название компании-покупателя; 2. сумма сделки; 3. название компании, которую купили; 4. сумма инвестиций, вложенных в купленную компанию; 4. доля, которая отображает, во сколько раз сумма покупки превысила сумму вложенных в компанию инвестиций, округлённая до ближайшего целого числа. 5. Не учитывайте те сделки, в которых сумма покупки равна нулю. Если сумма инвестиций в компанию равна нулю, исключите такую компанию из таблицы. 6. Отсортируйте таблицу по сумме сделки от большей к меньшей, а затем по названию купленной компании в лексикографическом порядке. Ограничьте таблицу первыми десятью записями. |
| 21 | **[SQL-запрос №21](requests/request_21.sql)** | Выгрузите таблицу, в которую войдут названия компаний из категории `social`, получившие финансирование с 2010 по 2013 год включительно. Проверьте, что сумма инвестиций не равна нулю. Выведите также номер месяца, в котором проходил раунд финансирования. |
| 22 | **[SQL-запрос №22](requests/request_22.sql)** | Отберите данные по месяцам с 2010 по 2013 год, когда проходили инвестиционные раунды. Сгруппируйте данные по номеру месяца и получите таблицу, в которой будут поля: 1. номер месяца, в котором проходили раунды; 2. количество уникальных названий фондов из США, которые инвестировали в этом месяце; 3. количество компаний, купленных за этот месяц; 4. общая сумма сделок по покупкам в этом месяце. |
| 23 | **[SQL-запрос №23](requests/request_23.sql)** | Составьте сводную таблицу и выведите среднюю сумму инвестиций для стран, в которых есть стартапы, зарегистрированные в 2011, 2012 и 2013 годах. Данные за каждый год должны быть в отдельном поле. Отсортируйте таблицу по среднему значению инвестиций за 2011 год от большего к меньшему. |

---
# Вывод
В данном проекте мы решили 23 задачи и научились использовать SQL-запросы к базам данных для получения и извлечения нужной нам информации.

## Используемые библиотеки
*SQL, DataBase*
